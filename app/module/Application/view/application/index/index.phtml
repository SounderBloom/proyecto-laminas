<?php
/**
 * @var Laminas\View\Renderer\PhpRenderer $this
 */
?>
<div class="container p-5" style="height: 100vh; background-color: rgb(240,240,240)">
<h1 class="title mt-5 text-center">Hola Mundo!</h1>
<a href="<?= $this->url('application', ['action' => 'baseDatos']) ?>" class="btn btn-dark w-100 text-center p-4 mt-5">Registros de Base de Datos</a>
<a href="<?= $this->url('application', ['action' => 'capcha']) ?>" class="btn btn-dark w-100 text-center p-4 mt-5">Recaptcha</a>
<a href="gagsdghjks" class="btn btn-dark w-100 text-center p-4 mt-5">Pantalla 404</a>
<a href="<?= $this->url('application', ['action' => 'carrusel']) ?>" class="btn btn-dark w-100 text-center p-4 mt-5">Carrusel</a>
<button class="btn btn-dark w-100 text-center p-4 mt-5" data-bs-toggle="modal" data-bs-target="#exampleModal">
    Formulario Con Validaciones
</button>
</div>


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Formulario con Validaciones</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form id="formulario">
        <div class="modal-body">
          <div class="mb-3">
              <label for="exampleFormControlInput1" class="form-label">Nombre</label>
              <input type="text" class="form-control" id="nombre" placeholder="Tu Nombre">
          </div>
          <div class="mb-3">
              <label for="exampleFormControlInput1" class="form-label">Numero de Telefono</label>
              <input type="text" class="form-control" id="telefono" placeholder="56XXXXXXXX">
          </div>
          <div class="mb-3">
              <label for="exampleFormControlInput1" class="form-label">Correo</label>
              <input type="text" class="form-control" id="correo" placeholder="correo@ejemplo.com">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
          <input type="submit" value="Validar" class="btn btn-secondary"/>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

  const form = document.getElementById("formulario");
  const nombre = document.getElementById("nombre");
  const telefono = document.getElementById("telefono");
  const correo = document.getElementById("correo");

  /* ========= KEYDOWN NOMBRE (SOLO LETRAS) ========= */
  nombre.addEventListener("keydown", (e) => {
    const key = e.keyCode;

    if (
      (key >= 65 && key <= 90) || // A-Z
      (key >= 97 && key <= 122) || // a-z
      key === 32 || // espacio
      key === 8 // backspace
    ) {
      return;
    }

    e.preventDefault();
  });

  /* ========= KEYDOWN TELÉFONO (SOLO NÚMEROS, MAX 10) ========= */
  telefono.addEventListener("keydown", (e) => {
    const key = e.keyCode;

    if (key === 8) return;

    if (key < 48 || key > 57) {
      e.preventDefault();
      return;
    }

    if (telefono.value.length >= 10) {
      e.preventDefault();
    }
  });

  /* ========= VALIDACIÓN FORMULARIO ========= */
  form.addEventListener("submit", (e) => {
    e.preventDefault();

    const nombreValor = nombre.value.trim();
    const telefonoValor = telefono.value.trim();
    const correoValor = correo.value.trim();

    /* ===== CAMPOS VACÍOS ===== */
    if (nombreValor === "") {
      alert("El nombre no puede estar vacío");
      nombre.focus();
      return;
    }

    if (telefonoValor === "") {
      alert("El número de teléfono no puede estar vacío");
      telefono.focus();
      return;
    }

    if (correoValor === "") {
      alert("El correo no puede estar vacío");
      correo.focus();
      return;
    }

    /* ===== TELÉFONO (10 DÍGITOS EXACTOS) ===== */
    if (telefonoValor.length !== 10) {
      alert("El número de teléfono debe tener exactamente 10 dígitos");
      telefono.focus();
      return;
    }

    /* ===== CORREO ===== */
    const regexCorreo = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

    if (!regexCorreo.test(correoValor)) {
      alert("El correo es inválido");
      correo.focus();
      return;
    }

    /* ===== TODO CORRECTO ===== */
    alert("Formulario válido");
    form.reset();
  });

});
</script>
